<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EyeMind Web Tool</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <!-- Our customm styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">

    <!-- HELP PANEL -->
    <div id="help-panel" class="alert alert-info alert-dismissible fade show" role="alert">
      <h5>How EyeMind Helps Reduce Loneliness</h5>
      <ul>
        <li><strong>Risk Score:</strong> Identifies your current vulnerability so you can take timely action.</li>
        <li><strong>Gaze Engagement:</strong> Shows which information matters most—e.g. cost or format—so recommendations fit your priorities.</li>
        <li><strong>Choice Tasks:</strong> Reveals your true programme preferences via real‑world trade‑offs.</li>
        <li><strong>AI Recommendations:</strong> Combines all data to suggest evidence‑based interventions tailored to you.</li>
      </ul>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <ul class="nav nav-tabs" id="tabs">
      <li class="nav-item"><a class="nav-link active" data-bs-target="#risk" data-bs-toggle="tab">1. Risk <span class="badge bg-secondary" data-bs-toggle="tooltip" title="Validated 3‑item loneliness screener">?</span></a></li>
      <li class="nav-item"><a class="nav-link disabled" data-bs-target="#gaze" data-bs-toggle="tab">2. Gaze <span class="badge bg-secondary" data-bs-toggle="tooltip" title="Webcam‑based slide reading analytics">?</span></a></li>
      <li class="nav-item"><a class="nav-link disabled" data-bs-target="#dce" data-bs-toggle="tab">3. DCE <span class="badge bg-secondary" data-bs-toggle="tooltip" title="Discrete choice experiment on support programmes">?</span></a></li>
      <li class="nav-item"><a class="nav-link disabled" data-bs-target="#rec" data-bs-toggle="tab">4. Rec <span class="badge bg-secondary" data-bs-toggle="tooltip" title="AI‑driven personalized suggestions">?</span></a></li>
    </ul>

    <div class="tab-content">

      <!-- RISK -->
      <div class="tab-pane fade show active" id="risk">
        <h4>Loneliness Risk Screener</h4>
        <form id="risk-form">
          <div class="mb-3">
            <label for="q1">1. How often do you feel left out?</label>
            <select id="q1" class="form-select">
              <option value="0">Never</option>
              <option value="1">Sometimes</option>
              <option value="2">Often</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="q2">2. How often do you lack companionship?</label>
            <select id="q2" class="form-select">
              <option value="0">Never</option>
              <option value="1">Sometimes</option>
              <option value="2">Often</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="q3">3. How often do you feel isolated?</label>
            <select id="q3" class="form-select">
              <option value="0">Never</option>
              <option value="1">Sometimes</option>
              <option value="2">Often</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">Calculate Risk</button>
        </form>
        <div id="risk-result" class="mt-3"></div>
        <div id="risk-info" class="mt-2 hidden alert alert-secondary">
          <p><strong>Understanding Your Score:</strong></p>
          <ul>
            <li><strong>Low risk:</strong> Continue healthy social habits.</li>
            <li><strong>Moderate risk:</strong> Consider small changes like calling a friend weekly.</li>
            <li><strong>High risk:</strong> Explore structured programmes (peer support, counselling).</li>
          </ul>
        </div>
      </div>

      <!-- GAZE -->
      <div class="tab-pane fade" id="gaze">
        <h4>Gaze Engagement Calibration & Reading</h4>
        <p>Click each corner dot to calibrate your webcam.</p>
        <div id="cal-area">
          <div id="cp0" class="cal-point"></div>
          <div id="cp1" class="cal-point"></div>
          <div id="cp2" class="cal-point"></div>
          <div id="cp3" class="cal-point"></div>
        </div>
        <button id="start-read" class="btn btn-success mt-3 hidden">Start Reading</button>

        <div id="slide-content" class="hidden">
          <!-- Slide 1 -->
          <div class="slide">
            <h5>Characteristic 1: Type of support</h5>
            <!-- ... -->
          </div>
          <!-- ... slides 2–6 ... -->
        </div>
        <div id="slide-controls" class="mt-2 hidden">
          <button id="prev-slide" class="btn btn-secondary">Prev</button>
          <button id="next-slide" class="btn btn-secondary">Next</button>
          <button id="finish-read" class="btn btn-primary hidden">Done Reading</button>
        </div>

        <div id="gaze-summary" class="mt-3 hidden alert alert-secondary">
          <h5>Reading Engagement Summary</h5>
          <p>You spent most time on: <strong id="top-slide"></strong>.</p>
          <p>This suggests that <span id="slide-meaning"></span>.</p>
        </div>
      </div>

      <!-- DCE -->
      <div class="tab-pane fade" id="dce">
        <h4>Support Program Discrete Choice</h4>
        <p>Select your preferred programme for each task:</p>
        <form id="dce-form">
          <div id="task-container"></div>
          <button type="submit" class="btn btn-primary mt-3">Submit Choices</button>
        </form>
      </div>

      <!-- RECOMMENDATIONS -->
      <div class="tab-pane fade" id="rec">
        <h4>Your Personalized Recommendations</h4>
        <div id="rec-content"></div>
        <div class="mt-3 alert alert-success">
          <h5>How This Helps Reduce Loneliness</h5>
          <ul>
            <li>Regular social contact builds supportive relationships.</li>
            <li>Peer groups increase shared understanding and reduce isolation.</li>
            <li>Professional counselling addresses unhelpful thought patterns.</li>
            <li>Virtual options ensure accessibility if mobility is limited.</li>
          </ul>
        </div>
      </div>

    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- WebGazer -->
  <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
  <!-- Application JS -->
  <script src="app.js" defer></script>
</body>
</html>
