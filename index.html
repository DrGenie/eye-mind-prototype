<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>EyeMind – Comprehensive Prototype</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet"/>
  <!-- heatmap.js for gaze heatmaps -->
  <script src="https://cdn.jsdelivr.net/npm/heatmapjs@2.0.5/heatmap.min.js"></script>
  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="container py-4">

    <!-- LOGIN SECTION -->
    <div id="loginSection" class="col-md-6 mx-auto mb-5">
      <h2 class="mb-3">Secure Login</h2>
      <form id="loginForm" novalidate>
        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input id="username" class="form-control" placeholder="testuser" required/>
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input id="password" type="password" class="form-control" placeholder="welcome123" required/>
        </div>
        <button id="loginBtn" type="submit" class="btn btn-primary">Login</button>
        <p id="loginMsg" class="mt-2"></p>
      </form>
      <div id="securityTips" class="mt-4 alert alert-secondary d-none">
        <h6>Security Tips</h6>
        <ul>
          <li>Always use <strong>HTTPS</strong> to protect your data.</li>
          <li>Choose a strong, unique password you don’t reuse elsewhere.</li>
          <li>Enable two‑factor authentication if available.</li>
          <li>If you suspect a breach, reset your password immediately.</li>
        </ul>
      </div>
    </div>

    <!-- APPLICATION CONTENT -->
    <div id="appContent" class="d-none">
      <ul class="nav nav-tabs" id="mainNav" role="tablist">
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#intro">Introduction</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#instructions">Instructions</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#ai" disabled>AI Risk</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#gaze" disabled>Gaze Engagement</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#dce" disabled>DCE</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#recs" disabled>Recommendations</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" data-bs-target="#summary" disabled>Summary</button>
        </li>
      </ul>

      <div class="tab-content mt-3">
        <div class="tab-pane fade show active" id="intro">
          <h3>Welcome to EyeMind</h3>
          <p>
            EyeMind combine AI risk scoring, gaze analytics, preference experiments (DCE),
            audio journalling, reminders, PDF sharing and badges to help older adults stay connected.
          </p>
        </div>

        <div class="tab-pane fade" id="instructions">
          <h3>How to Use</h3>
          <ol>
            <li>Calculate your <strong>AI Risk</strong>.</li>
            <li>Calibrate &amp; track in <strong>Gaze Engagement</strong>.</li>
            <li>Complete the <strong>DCE</strong> scenarios.</li>
            <li>Review <strong>Recommendations</strong>, record an <strong>Audio Journal</strong>, set reminders.</li>
            <li>Earn <em>Badges</em> and export your <strong>Summary</strong> as a PDF.</li>
          </ol>
        </div>

        <div class="tab-pane fade" id="ai">
          <h3>Loneliness Risk Assessment</h3>
          <div class="mb-3">
            <label>How often do you feel left out?</label>
            <select id="q1" class="form-select my-1">
              <option value="0">Never</option>
              <option value="1">Sometimes</option>
              <option value="2">Often</option>
            </select>
          </div>
          <div class="mb-3">
            <label>How often do you lack companionship?</label>
            <select id="q2" class="form-select my-1">
              <option value="0">Never</option>
              <option value="1">Sometimes</option>
              <option value="2">Often</option>
            </select>
          </div>
          <button id="calcScoreBtn" class="btn btn-primary">Calculate Risk</button>
          <p id="riskResult" class="mt-3 fs-5"></p>
        </div>

        <div class="tab-pane fade" id="gaze">
          <h3>Gaze Engagement</h3>
          <p id="calMsg">Press <strong>Calibrate</strong> and tap each corner dot.</p>
          <button id="startCal" class="btn btn-secondary mb-2">Calibrate</button>
          <div id="calArea" class="border mb-2 position-relative">
            <img src="https://via.placeholder.com/600x300" class="w-100 h-100" alt=""/>
            <div id="heatmapContainer" style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>
            <div id="gazeDot" style="position:absolute;width:12px;height:12px;background:red;border-radius:50%;display:none;pointer-events:none;"></div>
          </div>
          <div id="gazeControls" class="d-none mb-2">
            <button id="startGaze" class="btn btn-success me-2">Start Tracking</button>
            <button id="stopGaze" class="btn btn-danger me-2" disabled>Stop</button>
            <button id="toggleHeatmap" class="btn btn-secondary">Show Heatmap</button>
          </div>
          <canvas id="scanCanvas" class="w-100 border mb-2" style="height:200px;"></canvas>
          <div id="gazeStats" class="p-2 border bg-light"></div>
        </div>

        <div class="tab-pane fade" id="dce">
          <h3>Discrete Choice Experiment</h3>
          <div class="scenario border p-3 mb-3">
            <p><strong>Scenario 1:</strong></p>
            <label class="form-check me-3">
              <input type="radio" name="sc1" value="A" class="form-check-input"/> Weekly in‑person
            </label>
            <label class="form-check">
              <input type="radio" name="sc1" value="B" class="form-check-input"/> Daily virtual
            </label>
          </div>
          <div class="scenario border p-3 mb-3">
            <p><strong>Scenario 2:</strong></p>
            <label class="form-check me-3">
              <input type="radio" name="sc2" value="A" class="form-check-input"/> Phone every 2 days
            </label>
            <label class="form-check">
              <input type="radio" name="sc2" value="B" class="form-check-input"/> Group video weekly
            </label>
          </div>
          <div class="scenario border p-3 mb-3">
            <p><strong>Scenario 3:</strong></p>
            <label class="form-check me-3">
              <input type="radio" name="sc3" value="A" class="form-check-input"/> Monthly event
            </label>
            <label class="form-check">
              <input type="radio" name="sc3" value="B" class="form-check-input"/> Daily app chat
            </label>
          </div>
          <button id="submitDCE" class="btn btn-primary">Submit Preferences</button>
          <div id="dceResult" class="mt-3 fs-5"></div>
        </div>

        <div class="tab-pane fade" id="recs">
          <h3>Recommendations</h3>
          <div id="recommendations" class="fs-5 mb-4"></div>
          <h5>Audio Journal</h5>
          <button id="startAudio" class="btn btn-outline-primary me-2">Start Recording</button>
          <button id="stopAudio" class="btn btn-outline-danger" disabled>Stop &amp; Play</button>
          <div id="audioMsg" class="mt-2"></div>
          <h5 class="mt-4">Reminders</h5>
          <div class="d-flex flex-column flex-md-row mb-3">
            <input type="datetime-local" id="reminderTime" class="form-control w-100 w-md-auto me-md-2 mb-2 mb-md-0"/>
            <button id="setReminder" class="btn btn-info">Add Reminder</button>
          </div>
          <ul id="reminderList" class="list-group mb-4"></ul>
          <h5>Badges</h5>
          <div id="badges" class="mb-3"></div>
        </div>

        <div class="tab-pane fade" id="summary">
          <h3>Summary Report</h3>
          <div id="summaryContent" class="fs-5"></div>
          <button id="generatePDF" class="btn btn-outline-primary mt-3">Download PDF</button>
        </div>

      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
